{"ast":null,"code":"var _jsxFileName = \"/Users/sami/Documents/Doctor-Appointment/frontend/src/components/bookAppointment/BookAppointment.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./BookAppointment.css\";\n// ===================== Add task 24 imports here =====================\n\n// Default time slots available for appointment booking\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst defaultTimeSlots = [\"10:00\", \"11:00\", \"12:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\", \"18:00\", \"19:00\"];\nexport default function BookAppointment() {\n  _s();\n  const {\n    doctorId\n  } = useParams(); // Get doctor ID from route parameter\n  const navigate = useNavigate(); // Used for redirecting after booking\n\n  // State variables\n  const [formData, setFormData] = useState({\n    date: \"\",\n    time: \"\",\n    reason: \"\"\n  }); // Form input values\n  const [doctor, setDoctor] = useState(null); // Fetched doctor details\n  const [currentDate, setCurrentDate] = useState(new Date()); // Calendar month navigation\n  const [bookedSlots, setBookedSlots] = useState([]); // Already booked time slots for selected date\n  const [statusMessage, setStatusMessage] = useState(\"\"); // Message after booking attempt\n  const [isSuccess, setIsSuccess] = useState(null); // null = nothing, true = success, false = error\n\n  // Fetch doctor details once on component mount\n  useEffect(() => {\n    axios.get(`http://localhost:3000/doctors/${doctorId}`).then(res => setDoctor(res.data)).catch(err => console.error(\"Failed to fetch doctor:\", err));\n  }, [doctorId]);\n\n  // Fetch booked time slots whenever selected date changes\n  useEffect(() => {\n    if (formData.date) {\n      axios.get(`/appointments?doctorId=${doctorId}&date=${formData.date}`).then(res => setBookedSlots(res.data.bookedTimes)).catch(err => console.error(\"Failed to fetch booked slots:\", err));\n    }\n  }, [formData.date, doctorId]);\n\n  // When user clicks a date on calendar\n  const handleDateClick = date => {\n    setFormData({\n      ...formData,\n      date,\n      time: \"\"\n    }); // Reset selected time\n  };\n\n  // Handle input changes for all form fields\n  const handleChange = e => {\n    const updatedForm = {\n      ...formData,\n      [e.target.name]: e.target.value\n    };\n    setFormData(updatedForm);\n  };\n\n  // Navigate calendar month back/forward\n  const handleMonthChange = direction => {\n    const newDate = new Date(currentDate);\n    newDate.setMonth(currentDate.getMonth() + direction);\n    setCurrentDate(newDate);\n  };\n\n  // Submit form to book appointment\n  const handleSubmit = e => {\n    e.preventDefault();\n    const userId = localStorage.getItem(\"userId\");\n\n    // Send appointment booking request\n    axios.post(\"/book-appointment\", {\n      patientId: userId,\n      doctorId,\n      date: formData.date,\n      time: formData.time,\n      reason: formData.reason\n    }).then(() => {\n      // On success, show message and redirect to appointments page\n      setStatusMessage(\" Appointment booked successfully! Redirecting...\");\n      setIsSuccess(true);\n      setTimeout(() => navigate(\"/appointments\"), 2000);\n    }).catch(err => {\n      console.error(\"Booking failed\", err);\n      setStatusMessage(\" Failed to book appointment. Please try again.\");\n      setIsSuccess(false);\n    });\n  };\n\n  // Generate the calendar UI with days, handling past dates\n  const generateCalendar = () => {\n    const days = [];\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const monthName = currentDate.toLocaleString(\"default\", {\n      month: \"long\"\n    });\n    const date = new Date(year, month, 1);\n    const startDay = date.getDay(); // Index of first weekday\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    const todayStr = new Date().toISOString().split(\"T\")[0];\n\n    // Header with month navigation and weekdays\n    const header = /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-navigation\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleMonthChange(-1),\n          children: \"<\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"calendar-header\",\n          children: [monthName.toUpperCase(), \" \", year]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleMonthChange(1),\n          children: \">\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"].map(day => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-weekday\",\n        children: day\n      }, day, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true);\n\n    // Empty slots for days before the 1st of the month\n    for (let i = 0; i < startDay; i++) {\n      days.push(/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-day empty\"\n      }, \"empty-\" + i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this));\n    }\n\n    // Render calendar days\n    for (let i = 1; i <= daysInMonth; i++) {\n      const thisDate = `${year}-${String(month + 1).padStart(2, \"0\")}-${String(i).padStart(2, \"0\")}`;\n      const isPast = thisDate < todayStr;\n      days.push(/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `calendar-day${formData.date === thisDate ? \" selected\" : \"\"}${isPast ? \" disabled\" : \"\"}`,\n        onClick: () => !isPast && handleDateClick(thisDate),\n        children: i\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this));\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [header, days]\n    }, void 0, true);\n  };\n\n  // Show loading state until doctor data is fetched\n  if (!doctor) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading doctor information...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"appointment-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"appointment-title\",\n      children: \"Book an Appointment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"doctor-info\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"doctor-profile\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: doctor.image_url,\n          alt: doctor.name,\n          className: \"doctor-photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"doctor-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"doctor-name\",\n            children: [\"Dr. \", doctor.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"doctor-specialty\",\n            children: doctor.specialties\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"doctor-experience\",\n            children: [doctor.exp, \" years of experience\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), statusMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message-box ${isSuccess ? \"success\" : \"error\"}`,\n      children: statusMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"appointment-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Select Date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-container\",\n        children: generateCalendar()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), formData.date && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Available Time Slots\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"time\",\n          value: formData.time,\n          onChange: handleChange,\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select a time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this), defaultTimeSlots.map(slot => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: slot,\n            disabled: bookedSlots.includes(slot),\n            children: [slot, \" \", bookedSlots.includes(slot) ? \"(Booked)\" : \"\"]\n          }, slot, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Reason for Visit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"reason\",\n        value: formData.reason,\n        onChange: handleChange,\n        placeholder: \"Describe your symptoms\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Book Appointment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n_s(BookAppointment, \"ffktS1XoLoVpuMqIb1fUyAlHRA0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = BookAppointment;\nvar _c;\n$RefreshReg$(_c, \"BookAppointment\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","defaultTimeSlots","BookAppointment","_s","doctorId","navigate","formData","setFormData","date","time","reason","doctor","setDoctor","currentDate","setCurrentDate","Date","bookedSlots","setBookedSlots","statusMessage","setStatusMessage","isSuccess","setIsSuccess","get","then","res","data","catch","err","console","error","bookedTimes","handleDateClick","handleChange","e","updatedForm","target","name","value","handleMonthChange","direction","newDate","setMonth","getMonth","handleSubmit","preventDefault","userId","localStorage","getItem","post","patientId","setTimeout","generateCalendar","days","year","getFullYear","month","monthName","toLocaleString","startDay","getDay","daysInMonth","getDate","todayStr","toISOString","split","header","children","className","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","toUpperCase","map","day","i","push","thisDate","String","padStart","isPast","src","image_url","alt","specialties","exp","onSubmit","onChange","required","slot","disabled","includes","placeholder","_c","$RefreshReg$"],"sources":["/Users/sami/Documents/Doctor-Appointment/frontend/src/components/bookAppointment/BookAppointment.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./BookAppointment.css\";\n// ===================== Add task 24 imports here =====================\n\n\n// Default time slots available for appointment booking\nconst defaultTimeSlots = [\n  \"10:00\", \"11:00\", \"12:00\", \"13:00\", \"14:00\",\n  \"15:00\", \"16:00\", \"17:00\", \"18:00\", \"19:00\"\n];\n\nexport default function BookAppointment() {\n  const { doctorId } = useParams(); // Get doctor ID from route parameter\n  const navigate = useNavigate();   // Used for redirecting after booking\n\n  // State variables\n  const [formData, setFormData] = useState({ date: \"\", time: \"\", reason: \"\" }); // Form input values\n  const [doctor, setDoctor] = useState(null);            // Fetched doctor details\n  const [currentDate, setCurrentDate] = useState(new Date()); // Calendar month navigation\n  const [bookedSlots, setBookedSlots] = useState([]);    // Already booked time slots for selected date\n  const [statusMessage, setStatusMessage] = useState(\"\"); // Message after booking attempt\n  const [isSuccess, setIsSuccess] = useState(null);       // null = nothing, true = success, false = error\n\n  // Fetch doctor details once on component mount\n  useEffect(() => {\n    axios.get(`http://localhost:3000/doctors/${doctorId}`)\n      .then(res => setDoctor(res.data))\n      .catch(err => console.error(\"Failed to fetch doctor:\", err));\n  }, [doctorId]);\n\n  // Fetch booked time slots whenever selected date changes\n  useEffect(() => {\n    if (formData.date) {\n      axios.get(`/appointments?doctorId=${doctorId}&date=${formData.date}`)\n        .then(res => setBookedSlots(res.data.bookedTimes))\n        .catch(err => console.error(\"Failed to fetch booked slots:\", err));\n    }\n  }, [formData.date, doctorId]);\n\n  // When user clicks a date on calendar\n  const handleDateClick = (date) => {\n    setFormData({ ...formData, date, time: \"\" }); // Reset selected time\n  };\n\n  // Handle input changes for all form fields\n  const handleChange = (e) => {\n    const updatedForm = { ...formData, [e.target.name]: e.target.value };\n    setFormData(updatedForm);\n  };\n\n  // Navigate calendar month back/forward\n  const handleMonthChange = (direction) => {\n    const newDate = new Date(currentDate);\n    newDate.setMonth(currentDate.getMonth() + direction);\n    setCurrentDate(newDate);\n  };\n\n  // Submit form to book appointment\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const userId = localStorage.getItem(\"userId\");\n\n    // Send appointment booking request\n    axios.post(\"/book-appointment\", {\n      patientId: userId,\n      doctorId,\n      date: formData.date,\n      time: formData.time,\n      reason: formData.reason\n    })\n    .then(() => {\n      // On success, show message and redirect to appointments page\n      setStatusMessage(\" Appointment booked successfully! Redirecting...\");\n      setIsSuccess(true);\n      setTimeout(() => navigate(\"/appointments\"), 2000);\n    })\n    .catch(err => {\n      console.error(\"Booking failed\", err);\n      setStatusMessage(\" Failed to book appointment. Please try again.\");\n      setIsSuccess(false);\n    });\n  };\n\n  // Generate the calendar UI with days, handling past dates\n  const generateCalendar = () => {\n    const days = [];\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const monthName = currentDate.toLocaleString(\"default\", { month: \"long\" });\n    const date = new Date(year, month, 1);\n    const startDay = date.getDay(); // Index of first weekday\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    const todayStr = new Date().toISOString().split(\"T\")[0];\n\n    // Header with month navigation and weekdays\n    const header = (\n      <>\n        <div className=\"calendar-navigation\">\n          <button type=\"button\" onClick={() => handleMonthChange(-1)}>&lt;</button>\n          <div className=\"calendar-header\">{monthName.toUpperCase()} {year}</div>\n          <button type=\"button\" onClick={() => handleMonthChange(1)}>&gt;</button>\n        </div>\n        {[\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"].map((day) => (\n          <div key={day} className=\"calendar-weekday\">{day}</div>\n        ))}\n      </>\n    );\n\n    // Empty slots for days before the 1st of the month\n    for (let i = 0; i < startDay; i++) {\n      days.push(<div key={\"empty-\" + i} className=\"calendar-day empty\"></div>);\n    }\n\n    // Render calendar days\n    for (let i = 1; i <= daysInMonth; i++) {\n      const thisDate = `${year}-${String(month + 1).padStart(2, \"0\")}-${String(i).padStart(2, \"0\")}`;\n      const isPast = thisDate < todayStr;\n\n      days.push(\n        <div\n          key={i}\n          className={`calendar-day${formData.date === thisDate ? \" selected\" : \"\"}${isPast ? \" disabled\" : \"\"}`}\n          onClick={() => !isPast && handleDateClick(thisDate)}\n        >\n          {i}\n        </div>\n      );\n    }\n\n    return <>{header}{days}</>;\n  };\n\n  // Show loading state until doctor data is fetched\n  if (!doctor) {\n    return (\n      <div className=\"loader-wrapper\">\n        <div className=\"spinner\"></div>\n        <p>Loading doctor information...</p>\n      </div>\n    );\n  }\n  \n\n  return (\n    <div className=\"appointment-container\">\n      <h1 className=\"appointment-title\">Book an Appointment</h1>\n\n      {/* Doctor profile information */}\n      <div className=\"doctor-info\">\n        <div className=\"doctor-profile\">\n          <img src={doctor.image_url} alt={doctor.name} className=\"doctor-photo\" />\n          <div className=\"doctor-details\">\n            <h2 className=\"doctor-name\">Dr. {doctor.name}</h2>\n            <p className=\"doctor-specialty\">{doctor.specialties}</p>\n            <p className=\"doctor-experience\">{doctor.exp} years of experience</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Booking status message */}\n      {statusMessage && (\n        <div className={`message-box ${isSuccess ? \"success\" : \"error\"}`}>\n          {statusMessage}\n        </div>\n      )}\n\n      {/* Appointment form */}\n      <form onSubmit={handleSubmit} className=\"appointment-form\">\n        <label>Select Date</label>\n        <div className=\"calendar-container\">{generateCalendar()}</div>\n\n        {/* Show time slots only after a date is selected */}\n        {formData.date && (\n          <>\n            <label>Available Time Slots</label>\n            <select name=\"time\" value={formData.time} onChange={handleChange} required>\n              <option value=\"\">Select a time</option>\n              {defaultTimeSlots.map((slot) => (\n                <option key={slot} value={slot} disabled={bookedSlots.includes(slot)}>\n                  {slot} {bookedSlots.includes(slot) ? \"(Booked)\" : \"\"}\n                </option>\n              ))}\n            </select>\n          </>\n        )}\n\n        {/* Reason input */}\n        <label>Reason for Visit</label>\n        <textarea\n          name=\"reason\"\n          value={formData.reason}\n          onChange={handleChange}\n          placeholder=\"Describe your symptoms\"\n          required\n        ></textarea>\n\n        <button type=\"submit\">Book Appointment</button>\n      </form>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}